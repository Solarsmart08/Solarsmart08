<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Smart Charging</title>

    <!-- Firebase JS SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-analytics.js"></script>
</head>
<body>

    <h1>Solar Smart EV Charging</h1>
    <!-- Form for user input -->
    <label for="desiredCharge">Desired Charge (%)</label>
    <input type="number" id="desiredCharge" placeholder="Enter desired charge %">
    <br>
    <label for="timeRequired">Time Required (in minutes)</label>
    <input type="number" id="timeRequired" placeholder="Enter time required">
    <br>
    <button onclick="sendChargeRequest()">Submit</button>
    
    <p id="successMessage" style="color: green;"></p>

    <!-- Firebase Configuration and Initialization -->
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBuwoihGoRMN4oDHvzFLWABkOSKynHZsBg",
            authDomain: "solarsmart-e68f8.firebaseapp.com",
            databaseURL: "https://solarsmart-e68f8-default-rtdb.firebaseio.com",
            projectId: "solarsmart-e68f8",
            storageBucket: "solarsmart-e68f8.appspot.com",
            messagingSenderId: "262623003110",
            appId: "1:262623003110:web:484fa153499e3c8ce79627",
            measurementId: "G-RP5RDJG73C"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const analytics = firebase.analytics();

        // Function to send charge request data to Firebase
        function sendChargeRequest() {
            var desiredCharge = document.getElementById("desiredCharge").value;
            var timeRequired = document.getElementById("timeRequired").value;
            var successMessage = document.getElementById("successMessage");

            if (desiredCharge === "" || desiredCharge < 1 || desiredCharge > 100) {
                alert("Please enter a valid charge percentage.");
                return;
            }

            // Clear any previous success messages
            successMessage.textContent = "";

            // Send the charge request to Firebase
            firebase.database().ref('chargeRequests').set({
                desiredCharge: desiredCharge,
                timeRequired: timeRequired
            }).then(function() {
                successMessage.textContent = "Your data has been successfully sent to Firebase!";
                alert("Charge request sent successfully!");
            }).catch(function(error) {
                successMessage.textContent = "";
                alert("Error sending charge request: " + error.message);
                console.error("Error sending data to Firebase:", error);
            });
        }
    </script>
</body>
</html>
